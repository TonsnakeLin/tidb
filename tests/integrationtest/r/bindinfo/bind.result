drop table if exists t;
create table t (a int, b int, c int, d int);
begin;
select a from t where a in (1, 2, 3);
a
select @@last_plan_from_binding;
@@last_plan_from_binding
0
create binding for select a from t where a in (1) using select a from t where a in (1);
select a from t where a in (1, 2, 3);
a
select @@last_plan_from_binding;
@@last_plan_from_binding
1
select a from t where a in (1, 2);
a
select @@last_plan_from_binding;
@@last_plan_from_binding
1
select a from t where a in (1);
a
select @@last_plan_from_binding;
@@last_plan_from_binding
1
select b from t where b in (1);
b
select @@last_plan_from_binding;
@@last_plan_from_binding
0
create binding for select b from t where b in (1,2,3) using select b from t where b in (1,2,3);
select b from t where b in (1);
b
select @@last_plan_from_binding;
@@last_plan_from_binding
1
select * from t where a in (1) and b in (1) and c in (1);
a	b	c	d
select @@last_plan_from_binding;
@@last_plan_from_binding
0
create binding for select * from t where a in (1) and b in (1,2) and c in (1,2,3) using
select * from t where a in (1,2,3) and b in (1,2) and c in (1);
select * from t where a in (1) and b in (1) and c in (1);
a	b	c	d
select @@last_plan_from_binding;
@@last_plan_from_binding
1
select * from t where a in (1) and b in (1,2) and c in (1,2,3);
a	b	c	d
select @@last_plan_from_binding;
@@last_plan_from_binding
1
select * from t where a in (1,2,3) and b in (1,2) and c in (1);
a	b	c	d
select @@last_plan_from_binding;
@@last_plan_from_binding
1
commit;
set tidb_cost_model_version=2;
drop table if exists t1;
drop table if exists t2;
create table t1(id int);
create table t2(id int);
explain format='brief' SELECT * from t1,t2 where t1.id = t2.id;
id	estRows	task	access object	operator info
HashJoin	12487.50	root		inner join, equal:[eq(bindinfo__bind.t1.id, bindinfo__bind.t2.id)]
├─TableReader(Build)	9990.00	root		data:Selection
│ └─Selection	9990.00	cop[tikv]		not(isnull(bindinfo__bind.t2.id))
│   └─TableFullScan	10000.00	cop[tikv]	table:t2	keep order:false, stats:pseudo
└─TableReader(Probe)	9990.00	root		data:Selection
  └─Selection	9990.00	cop[tikv]		not(isnull(bindinfo__bind.t1.id))
    └─TableFullScan	10000.00	cop[tikv]	table:t1	keep order:false, stats:pseudo
explain format='brief' SELECT  /*+ TIDB_SMJ(t1, t2) */  * from t1,t2 where t1.id = t2.id;
id	estRows	task	access object	operator info
MergeJoin	12487.50	root		inner join, left key:bindinfo__bind.t1.id, right key:bindinfo__bind.t2.id
├─Sort(Build)	9990.00	root		bindinfo__bind.t2.id
│ └─TableReader	9990.00	root		data:Selection
│   └─Selection	9990.00	cop[tikv]		not(isnull(bindinfo__bind.t2.id))
│     └─TableFullScan	10000.00	cop[tikv]	table:t2	keep order:false, stats:pseudo
└─Sort(Probe)	9990.00	root		bindinfo__bind.t1.id
  └─TableReader	9990.00	root		data:Selection
    └─Selection	9990.00	cop[tikv]		not(isnull(bindinfo__bind.t1.id))
      └─TableFullScan	10000.00	cop[tikv]	table:t1	keep order:false, stats:pseudo
create global binding for SELECT * from t1,t2 where t1.id = t2.id using SELECT  /*+ TIDB_SMJ(t1, t2) */  * from t1,t2 where t1.id = t2.id;
explain format='brief' SELECT * from t1,t2 where t1.id = t2.id;
id	estRows	task	access object	operator info
MergeJoin	12487.50	root		inner join, left key:bindinfo__bind.t1.id, right key:bindinfo__bind.t2.id
├─Sort(Build)	9990.00	root		bindinfo__bind.t2.id
│ └─TableReader	9990.00	root		data:Selection
│   └─Selection	9990.00	cop[tikv]		not(isnull(bindinfo__bind.t2.id))
│     └─TableFullScan	10000.00	cop[tikv]	table:t2	keep order:false, stats:pseudo
└─Sort(Probe)	9990.00	root		bindinfo__bind.t1.id
  └─TableReader	9990.00	root		data:Selection
    └─Selection	9990.00	cop[tikv]		not(isnull(bindinfo__bind.t1.id))
      └─TableFullScan	10000.00	cop[tikv]	table:t1	keep order:false, stats:pseudo
drop global binding for SELECT * from t1,t2 where t1.id = t2.id;
create index index_id on t1(id);
explain format='brief' SELECT * from t1 union SELECT * from t1;
id	estRows	task	access object	operator info
HashAgg	16000.00	root		group by:Column#5, funcs:firstrow(Column#5)->Column#5
└─Union	20000.00	root		
  ├─IndexReader	10000.00	root		index:IndexFullScan
  │ └─IndexFullScan	10000.00	cop[tikv]	table:t1, index:index_id(id)	keep order:false, stats:pseudo
  └─IndexReader	10000.00	root		index:IndexFullScan
    └─IndexFullScan	10000.00	cop[tikv]	table:t1, index:index_id(id)	keep order:false, stats:pseudo
explain format='brief' SELECT * from t1 use index(index_id) union SELECT * from t1;
id	estRows	task	access object	operator info
HashAgg	16000.00	root		group by:Column#5, funcs:firstrow(Column#5)->Column#5
└─Union	20000.00	root		
  ├─IndexReader	10000.00	root		index:IndexFullScan
  │ └─IndexFullScan	10000.00	cop[tikv]	table:t1, index:index_id(id)	keep order:false, stats:pseudo
  └─IndexReader	10000.00	root		index:IndexFullScan
    └─IndexFullScan	10000.00	cop[tikv]	table:t1, index:index_id(id)	keep order:false, stats:pseudo
create global binding for SELECT * from t1 union SELECT * from t1 using SELECT * from t1 use index(index_id) union SELECT * from t1;
explain format='brief' SELECT * from t1 union SELECT * from t1;
id	estRows	task	access object	operator info
HashAgg	16000.00	root		group by:Column#5, funcs:firstrow(Column#5)->Column#5
└─Union	20000.00	root		
  ├─IndexReader	10000.00	root		index:IndexFullScan
  │ └─IndexFullScan	10000.00	cop[tikv]	table:t1, index:index_id(id)	keep order:false, stats:pseudo
  └─IndexReader	10000.00	root		index:IndexFullScan
    └─IndexFullScan	10000.00	cop[tikv]	table:t1, index:index_id(id)	keep order:false, stats:pseudo
drop global binding for SELECT * from t1 union SELECT * from t1;
set tidb_cost_model_version=default;
drop table if exists t1;
drop table if exists t2;
create table t1(id int);
create table t2(id int);
explain format='brief' select * from t1 where exists(select 1 from t2 where t1.id=t2.id);
id	estRows	task	access object	operator info
HashJoin	7992.00	root		semi join, equal:[eq(bindinfo__bind.t1.id, bindinfo__bind.t2.id)]
├─TableReader(Build)	9990.00	root		data:Selection
│ └─Selection	9990.00	cop[tikv]		not(isnull(bindinfo__bind.t2.id))
│   └─TableFullScan	10000.00	cop[tikv]	table:t2	keep order:false, stats:pseudo
└─TableReader(Probe)	9990.00	root		data:Selection
  └─Selection	9990.00	cop[tikv]		not(isnull(bindinfo__bind.t1.id))
    └─TableFullScan	10000.00	cop[tikv]	table:t1	keep order:false, stats:pseudo
explain format='brief' select * from t1 where exists(select /*+ SEMI_JOIN_REWRITE() */ 1 from t2 where t1.id=t2.id);
id	estRows	task	access object	operator info
HashJoin	9990.00	root		inner join, equal:[eq(bindinfo__bind.t1.id, bindinfo__bind.t2.id)]
├─HashAgg(Build)	7992.00	root		group by:bindinfo__bind.t2.id, funcs:firstrow(bindinfo__bind.t2.id)->bindinfo__bind.t2.id
│ └─TableReader	7992.00	root		data:HashAgg
│   └─HashAgg	7992.00	cop[tikv]		group by:bindinfo__bind.t2.id, 
│     └─Selection	9990.00	cop[tikv]		not(isnull(bindinfo__bind.t2.id))
│       └─TableFullScan	10000.00	cop[tikv]	table:t2	keep order:false, stats:pseudo
└─TableReader(Probe)	9990.00	root		data:Selection
  └─Selection	9990.00	cop[tikv]		not(isnull(bindinfo__bind.t1.id))
    └─TableFullScan	10000.00	cop[tikv]	table:t1	keep order:false, stats:pseudo
create global binding for
select * from t1 where exists(select 1 from t2 where t1.id=t2.id)
using
select * from t1 where exists(select /*+ SEMI_JOIN_REWRITE() */ 1 from t2 where t1.id=t2.id);
explain format='brief' select * from t1 where exists(select 1 from t2 where t1.id=t2.id);
id	estRows	task	access object	operator info
HashJoin	9990.00	root		inner join, equal:[eq(bindinfo__bind.t1.id, bindinfo__bind.t2.id)]
├─HashAgg(Build)	7992.00	root		group by:bindinfo__bind.t2.id, funcs:firstrow(bindinfo__bind.t2.id)->bindinfo__bind.t2.id
│ └─TableReader	7992.00	root		data:HashAgg
│   └─HashAgg	7992.00	cop[tikv]		group by:bindinfo__bind.t2.id, 
│     └─Selection	9990.00	cop[tikv]		not(isnull(bindinfo__bind.t2.id))
│       └─TableFullScan	10000.00	cop[tikv]	table:t2	keep order:false, stats:pseudo
└─TableReader(Probe)	9990.00	root		data:Selection
  └─Selection	9990.00	cop[tikv]		not(isnull(bindinfo__bind.t1.id))
    └─TableFullScan	10000.00	cop[tikv]	table:t1	keep order:false, stats:pseudo
drop global binding for
select * from t1 where exists(select 1 from t2 where t1.id=t2.id)
using
select * from t1 where exists(select /*+ SEMI_JOIN_REWRITE() */ 1 from t2 where t1.id=t2.id);
drop table if exists t1;
create table t1(id int);
explain format='brief' with cte as (select * from t1) select * from cte a, cte b;
id	estRows	task	access object	operator info
HashJoin	100000000.00	root		CARTESIAN inner join
├─CTEFullScan(Build)	10000.00	root	CTE:cte AS b	data:CTE_0
└─CTEFullScan(Probe)	10000.00	root	CTE:cte AS a	data:CTE_0
CTE_0	10000.00	root		Non-Recursive CTE
└─TableReader(Seed Part)	10000.00	root		data:TableFullScan
  └─TableFullScan	10000.00	cop[tikv]	table:t1	keep order:false, stats:pseudo
explain format='brief' with cte as (select /*+ MERGE() */ * from t1) select * from cte a, cte b;
id	estRows	task	access object	operator info
HashJoin	100000000.00	root		CARTESIAN inner join
├─TableReader(Build)	10000.00	root		data:TableFullScan
│ └─TableFullScan	10000.00	cop[tikv]	table:t1	keep order:false, stats:pseudo
└─TableReader(Probe)	10000.00	root		data:TableFullScan
  └─TableFullScan	10000.00	cop[tikv]	table:t1	keep order:false, stats:pseudo
create global binding for
with cte as (select * from t1) select * from cte
using
with cte as (select /*+ MERGE() */ * from t1) select * from cte;
explain format='brief' with cte as (select * from t1) select * from cte;
id	estRows	task	access object	operator info
TableReader	10000.00	root		data:TableFullScan
└─TableFullScan	10000.00	cop[tikv]	table:t1	keep order:false, stats:pseudo
drop global binding for
with cte as (select * from t1) select * from cte
using
with cte as (select /*+ MERGE() */ * from t1) select * from cte;
drop table if exists t1;
drop table if exists t2;
create table t1(a int, b int);
create table t2(a int, b int);
explain format='brief' select exists (select t2.b from t2 where t2.a = t1.b limit 2) from t1;
id	estRows	task	access object	operator info
HashJoin	10000.00	root		left outer semi join, equal:[eq(bindinfo__bind.t1.b, bindinfo__bind.t2.a)]
├─TableReader(Build)	10000.00	root		data:TableFullScan
│ └─TableFullScan	10000.00	cop[tikv]	table:t2	keep order:false, stats:pseudo
└─TableReader(Probe)	10000.00	root		data:TableFullScan
  └─TableFullScan	10000.00	cop[tikv]	table:t1	keep order:false, stats:pseudo
explain format='brief' select exists (select /*+ no_decorrelate() */ t2.b from t2 where t2.a = t1.b limit 2) from t1;
id	estRows	task	access object	operator info
Projection	10000.00	root		Column#10
└─Apply	10000.00	root		CARTESIAN left outer semi join
  ├─TableReader(Build)	10000.00	root		data:TableFullScan
  │ └─TableFullScan	10000.00	cop[tikv]	table:t1	keep order:false, stats:pseudo
  └─Limit(Probe)	20000.00	root		offset:0, count:2
    └─TableReader	20000.00	root		data:Limit
      └─Limit	20000.00	cop[tikv]		offset:0, count:2
        └─Selection	20000.00	cop[tikv]		eq(bindinfo__bind.t2.a, bindinfo__bind.t1.b)
          └─TableFullScan	20000000.00	cop[tikv]	table:t2	keep order:false, stats:pseudo
create global binding for
select exists (select t2.b from t2 where t2.a = t1.b limit 2) from t1
using
select exists (select /*+ no_decorrelate() */ t2.b from t2 where t2.a = t1.b limit 2) from t1;
explain format='brief' select exists (select t2.b from t2 where t2.a = t1.b limit 2) from t1;
id	estRows	task	access object	operator info
Projection	10000.00	root		Column#10
└─Apply	10000.00	root		CARTESIAN left outer semi join
  ├─TableReader(Build)	10000.00	root		data:TableFullScan
  │ └─TableFullScan	10000.00	cop[tikv]	table:t1	keep order:false, stats:pseudo
  └─Limit(Probe)	20000.00	root		offset:0, count:2
    └─TableReader	20000.00	root		data:Limit
      └─Limit	20000.00	cop[tikv]		offset:0, count:2
        └─Selection	20000.00	cop[tikv]		eq(bindinfo__bind.t2.a, bindinfo__bind.t1.b)
          └─TableFullScan	20000000.00	cop[tikv]	table:t2	keep order:false, stats:pseudo
drop global binding for
select exists (select t2.b from t2 where t2.a = t1.b limit 2) from t1
using
select exists (select /*+ no_decorrelate() */ t2.b from t2 where t2.a = t1.b limit 2) from t1;
show variables like "%baselines%";
Variable_name	Value
tidb_capture_plan_baselines	OFF
tidb_evolve_plan_baselines	OFF
tidb_use_plan_baselines	ON
show global variables like "%baselines%";
Variable_name	Value
tidb_capture_plan_baselines	OFF
tidb_evolve_plan_baselines	OFF
tidb_use_plan_baselines	ON
drop table if exists t1;
drop table if exists t2;
create table t1(id int);
create table t2(id int);
explain SELECT * from t1,t2 where t1.id = t2.id;
id	estRows	task	access object	operator info
HashJoin_8	12487.50	root		inner join, equal:[eq(bindinfo__bind.t1.id, bindinfo__bind.t2.id)]
├─TableReader_15(Build)	9990.00	root		data:Selection_14
│ └─Selection_14	9990.00	cop[tikv]		not(isnull(bindinfo__bind.t2.id))
│   └─TableFullScan_13	10000.00	cop[tikv]	table:t2	keep order:false, stats:pseudo
└─TableReader_12(Probe)	9990.00	root		data:Selection_11
  └─Selection_11	9990.00	cop[tikv]		not(isnull(bindinfo__bind.t1.id))
    └─TableFullScan_10	10000.00	cop[tikv]	table:t1	keep order:false, stats:pseudo
explain SELECT  /*+ TIDB_SMJ(t1, t2) */  * from t1,t2 where t1.id = t2.id;
id	estRows	task	access object	operator info
MergeJoin_8	12487.50	root		inner join, left key:bindinfo__bind.t1.id, right key:bindinfo__bind.t2.id
├─Sort_16(Build)	9990.00	root		bindinfo__bind.t2.id
│ └─TableReader_15	9990.00	root		data:Selection_14
│   └─Selection_14	9990.00	cop[tikv]		not(isnull(bindinfo__bind.t2.id))
│     └─TableFullScan_13	10000.00	cop[tikv]	table:t2	keep order:false, stats:pseudo
└─Sort_12(Probe)	9990.00	root		bindinfo__bind.t1.id
  └─TableReader_11	9990.00	root		data:Selection_10
    └─Selection_10	9990.00	cop[tikv]		not(isnull(bindinfo__bind.t1.id))
      └─TableFullScan_9	10000.00	cop[tikv]	table:t1	keep order:false, stats:pseudo
begin;
SELECT * from t1,t2 where t1.id = t2.id;
id	id
select @@last_plan_from_binding;
@@last_plan_from_binding
0
create global binding for SELECT * from t1,t2 where t1.id = t2.id using SELECT  /*+ TIDB_SMJ(t1, t2) */  * from t1,t2 where t1.id = t2.id;
explain format='brief' SELECT * from t1,t2 where t1.id = t2.id;
id	estRows	task	access object	operator info
MergeJoin	12487.50	root		inner join, left key:bindinfo__bind.t1.id, right key:bindinfo__bind.t2.id
├─Sort(Build)	9990.00	root		bindinfo__bind.t2.id
│ └─TableReader	9990.00	root		data:Selection
│   └─Selection	9990.00	cop[tikv]		not(isnull(bindinfo__bind.t2.id))
│     └─TableFullScan	10000.00	cop[tikv]	table:t2	keep order:false, stats:pseudo
└─Sort(Probe)	9990.00	root		bindinfo__bind.t1.id
  └─TableReader	9990.00	root		data:Selection
    └─Selection	9990.00	cop[tikv]		not(isnull(bindinfo__bind.t1.id))
      └─TableFullScan	10000.00	cop[tikv]	table:t1	keep order:false, stats:pseudo
SELECT * from t1,t2 where t1.id = t2.id;
id	id
select @@last_plan_from_binding;
@@last_plan_from_binding
1
set binding disabled for SELECT * from t1,t2 where t1.id = t2.id;
SELECT * from t1,t2 where t1.id = t2.id;
id	id
select @@last_plan_from_binding;
@@last_plan_from_binding
0
commit;
drop global binding for SELECT * from t1,t2 where t1.id = t2.id;
drop table if exists t;
create table t(a int, b int, key(a));
create global binding for select * from t using select * from t use index(a);
select original_sql, bind_sql from mysql.bind_info where bind_sql = 'SELECT * FROM `bindinfo__bind`.`t` USE INDEX (`a`)';
original_sql	bind_sql
select * from `bindinfo__bind` . `t`	SELECT * FROM `bindinfo__bind`.`t` USE INDEX (`a`)
explain format = 'verbose' select * from t;
id	estRows	estCost	task	access object	operator info
IndexLookUp_6	10000.00	19517254.40	root		
├─IndexFullScan_4(Build)	10000.00	2035000.00	cop[tikv]	table:t, index:a(a)	keep order:false, stats:pseudo
└─TableRowIDScan_5(Probe)	10000.00	2273079.74	cop[tikv]	table:t	keep order:false, stats:pseudo
Level	Code	Message
Note	1105	Using the bindSQL: SELECT * FROM `bindinfo__bind`.`t` USE INDEX (`a`)
drop global binding for select * from t using select * from t use index(a);
drop table if exists t;
create table t(id int, value decimal(5,2));
table t;
explain table t;
id	estRows	task	access object	operator info
TableReader_5	10000.00	root		data:TableFullScan_4
└─TableFullScan_4	10000.00	cop[tikv]	table:t	keep order:false, stats:pseudo
desc table t;
id	estRows	task	access object	operator info
TableReader_5	10000.00	root		data:TableFullScan_4
└─TableFullScan_4	10000.00	cop[tikv]	table:t	keep order:false, stats:pseudo
set tidb_cost_model_version=2;
create table t41(id int primary key,name decimal(10,0), key idx_name(name));
create table t43(id int primary key,name bigint, key idx_name(name));
create table t44(id int primary key,name bigint, key idx_name(name));
create table t45(id int primary key,name bigint, key idx_name(name));
insert into t41 values(1,2);
insert into t43 values(1,2),(2,2);
insert into t44 values(1,2),(2,2);
insert into t45 values(1,2),(2,2);
create global binding for
select t41.* from t41,t43 where t41.name=t43.name and t41.id=1
using
select /*+ cast_decimal_as_bigint('bindinfo__bind.t43.name', 'bindinfo__bind.t41.name') */ t41.* from t41,t43 where t41.name=t43.name and t41.id=1;
explain select t41.* from t41,t43 where t41.name=t43.name and t41.id=1;
id	estRows	task	access object	operator info
IndexHashJoin_15	1.25	root		inner join, inner:IndexReader_12, outer key:Column#5, inner key:bindinfo__bind.t43.name, equal cond:eq(Column#5, bindinfo__bind.t43.name)
├─Projection_22(Build)	1.00	root		bindinfo__bind.t41.id, bindinfo__bind.t41.name, cast(bindinfo__bind.t41.name, bigint(20))->Column#5
│ └─Point_Get_23	1.00	root	table:t41	handle:1
└─IndexReader_12(Probe)	1.25	root		index:IndexRangeScan_11
  └─IndexRangeScan_11	1.25	cop[tikv]	table:t43, index:idx_name(name)	range: decided by [eq(bindinfo__bind.t43.name, Column#5)], keep order:false, stats:pseudo
select t41.* from t41,t43 where t41.name=t43.name and t41.id=1;
id	name
1	2
1	2
create binding for
select t41.* from t41 join t43 on t41.name=t43.name and t41.id=1
using
select /*+ cast_decimal_as_bigint('bindinfo__bind.t43.name', 'bindinfo__bind.t41.name') */ t41.* from t41 join t43 on t41.name=t43.name and t41.id=1;
explain select t41.* from t41 join t43 on t41.name=t43.name and t41.id=1;
id	estRows	task	access object	operator info
IndexHashJoin_15	1.25	root		inner join, inner:IndexReader_12, outer key:Column#5, inner key:bindinfo__bind.t43.name, equal cond:eq(Column#5, bindinfo__bind.t43.name)
├─Projection_22(Build)	1.00	root		bindinfo__bind.t41.id, bindinfo__bind.t41.name, cast(bindinfo__bind.t41.name, bigint(20))->Column#5
│ └─Point_Get_23	1.00	root	table:t41	handle:1
└─IndexReader_12(Probe)	1.25	root		index:IndexRangeScan_11
  └─IndexRangeScan_11	1.25	cop[tikv]	table:t43, index:idx_name(name)	range: decided by [eq(bindinfo__bind.t43.name, Column#5)], keep order:false, stats:pseudo
select t41.* from t41 join t43 on t41.name=t43.name and t41.id=1;
id	name
1	2
1	2
create binding for
select t41.* from t41,t43,t44 where t41.name=t43.name and t41.id=1 and t41.name=t44.name
using
select /*+ cast_decimal_as_bigint('bindinfo__bind.t41.name', 'bindinfo__bind.t43.name'), cast_decimal_as_bigint('bindinfo__bind.t41.name', 'bindinfo__bind.t44.name') */ t41.* from t41,t43,t44 where t41.name=t43.name and t41.id=1 and t41.name=t44.name;
explain select t41.* from t41,t43,t44 where t41.name=t43.name and t41.id=1 and t41.name=t44.name;
id	estRows	task	access object	operator info
IndexHashJoin_20	1.56	root		inner join, inner:IndexReader_17, outer key:Column#9, inner key:bindinfo__bind.t44.name, equal cond:eq(Column#9, bindinfo__bind.t44.name)
├─Projection_27(Build)	1.25	root		bindinfo__bind.t41.id, bindinfo__bind.t41.name, cast(bindinfo__bind.t41.name, bigint(20))->Column#9
│ └─IndexHashJoin_33	1.25	root		inner join, inner:IndexReader_30, outer key:Column#7, inner key:bindinfo__bind.t43.name, equal cond:eq(Column#7, bindinfo__bind.t43.name)
│   ├─Projection_40(Build)	1.00	root		bindinfo__bind.t41.id, bindinfo__bind.t41.name, cast(bindinfo__bind.t41.name, bigint(20))->Column#7
│   │ └─Point_Get_41	1.00	root	table:t41	handle:1
│   └─IndexReader_30(Probe)	1.25	root		index:IndexRangeScan_29
│     └─IndexRangeScan_29	1.25	cop[tikv]	table:t43, index:idx_name(name)	range: decided by [eq(bindinfo__bind.t43.name, Column#7)], keep order:false, stats:pseudo
└─IndexReader_17(Probe)	1.56	root		index:IndexRangeScan_16
  └─IndexRangeScan_16	1.56	cop[tikv]	table:t44, index:idx_name(name)	range: decided by [eq(bindinfo__bind.t44.name, Column#9)], keep order:false, stats:pseudo
select t41.* from t41,t43,t44 where t41.name=t43.name and t41.id=1 and t41.name=t44.name;
id	name
1	2
1	2
1	2
1	2
create binding for
select t41.* from t41 join t43 on t41.name=t43.name join t44 on t41.name=t44.name and t41.id=1
using
select /*+ cast_decimal_as_bigint('bindinfo__bind.t41.name', 'bindinfo__bind.t43.name'), cast_decimal_as_bigint('bindinfo__bind.t41.name', 'bindinfo__bind.t44.name') */ t41.* from t41 join t43 on t41.name=t43.name join t44 on t41.name=t44.name and t41.id=1;
explain select t41.* from t41 join t43 on t41.name=t43.name join t44 on t41.name=t44.name and t41.id=1;
id	estRows	task	access object	operator info
IndexHashJoin_21	1.56	root		inner join, inner:IndexReader_18, outer key:Column#9, inner key:bindinfo__bind.t44.name, equal cond:eq(Column#9, bindinfo__bind.t44.name)
├─Projection_28(Build)	1.25	root		bindinfo__bind.t41.id, bindinfo__bind.t41.name, cast(bindinfo__bind.t41.name, bigint(20))->Column#9
│ └─IndexHashJoin_34	1.25	root		inner join, inner:IndexReader_31, outer key:Column#7, inner key:bindinfo__bind.t43.name, equal cond:eq(Column#7, bindinfo__bind.t43.name)
│   ├─Projection_41(Build)	1.00	root		bindinfo__bind.t41.id, bindinfo__bind.t41.name, cast(bindinfo__bind.t41.name, bigint(20))->Column#7
│   │ └─Point_Get_42	1.00	root	table:t41	handle:1
│   └─IndexReader_31(Probe)	1.25	root		index:IndexRangeScan_30
│     └─IndexRangeScan_30	1.25	cop[tikv]	table:t43, index:idx_name(name)	range: decided by [eq(bindinfo__bind.t43.name, Column#7)], keep order:false, stats:pseudo
└─IndexReader_18(Probe)	1.56	root		index:IndexRangeScan_17
  └─IndexRangeScan_17	1.56	cop[tikv]	table:t44, index:idx_name(name)	range: decided by [eq(bindinfo__bind.t44.name, Column#9)], keep order:false, stats:pseudo
select t41.* from t41 join t43 on t41.name=t43.name join t44 on t41.name=t44.name and t41.id=1;
id	name
1	2
1	2
1	2
1	2
create binding for
select t41.* from t41,t43,t44,t45 where t41.name=t43.name and t41.id=1 and t41.name=t44.name and t41.name=t45.name
using
select /*+ cast_decimal_as_bigint('bindinfo__bind.t41.name', 'bindinfo__bind.t43.name'), cast_decimal_as_bigint('bindinfo__bind.t41.name', 'bindinfo__bind.t44.name'), cast_decimal_as_bigint('bindinfo__bind.t41.name', 'bindinfo__bind.t45.name') */ t41.* from t41,t43,t44,t45 where t41.name=t43.name and t41.id=1 and t41.name=t44.name and t41.name=t45.name;
explain select t41.* from t41,t43,t44,t45 where t41.name=t43.name and t41.id=1 and t41.name=t44.name and t41.name=t45.name;
id	estRows	task	access object	operator info
IndexHashJoin_25	1.95	root		inner join, inner:IndexReader_22, outer key:Column#14, inner key:bindinfo__bind.t45.name, equal cond:eq(Column#14, bindinfo__bind.t45.name)
├─Projection_32(Build)	1.56	root		bindinfo__bind.t41.id, bindinfo__bind.t41.name, cast(bindinfo__bind.t41.name, bigint(20))->Column#14
│ └─IndexHashJoin_38	1.56	root		inner join, inner:IndexReader_35, outer key:Column#11, inner key:bindinfo__bind.t44.name, equal cond:eq(Column#11, bindinfo__bind.t44.name)
│   ├─Projection_45(Build)	1.25	root		bindinfo__bind.t41.id, bindinfo__bind.t41.name, cast(bindinfo__bind.t41.name, bigint(20))->Column#11
│   │ └─IndexHashJoin_51	1.25	root		inner join, inner:IndexReader_48, outer key:Column#9, inner key:bindinfo__bind.t43.name, equal cond:eq(Column#9, bindinfo__bind.t43.name)
│   │   ├─Projection_58(Build)	1.00	root		bindinfo__bind.t41.id, bindinfo__bind.t41.name, cast(bindinfo__bind.t41.name, bigint(20))->Column#9
│   │   │ └─Point_Get_59	1.00	root	table:t41	handle:1
│   │   └─IndexReader_48(Probe)	1.25	root		index:IndexRangeScan_47
│   │     └─IndexRangeScan_47	1.25	cop[tikv]	table:t43, index:idx_name(name)	range: decided by [eq(bindinfo__bind.t43.name, Column#9)], keep order:false, stats:pseudo
│   └─IndexReader_35(Probe)	1.56	root		index:IndexRangeScan_34
│     └─IndexRangeScan_34	1.56	cop[tikv]	table:t44, index:idx_name(name)	range: decided by [eq(bindinfo__bind.t44.name, Column#11)], keep order:false, stats:pseudo
└─IndexReader_22(Probe)	1.95	root		index:IndexRangeScan_21
  └─IndexRangeScan_21	1.95	cop[tikv]	table:t45, index:idx_name(name)	range: decided by [eq(bindinfo__bind.t45.name, Column#14)], keep order:false, stats:pseudo
select t41.* from t41,t43,t44,t45 where t41.name=t43.name and t41.id=1 and t41.name=t44.name and t41.name=t45.name;
id	name
1	2
1	2
1	2
1	2
1	2
1	2
1	2
1	2
create binding for
select t41.* from t41 join t43 on t41.name=t43.name join t44 on t41.name=t44.name join t45 on t41.name=t45.name and t41.id=1
using
select /*+ cast_decimal_as_bigint('bindinfo__bind.t41.name', 'bindinfo__bind.t43.name'), cast_decimal_as_bigint('bindinfo__bind.t41.name', 'bindinfo__bind.t44.name'), cast_decimal_as_bigint('bindinfo__bind.t41.name', 'bindinfo__bind.t45.name') */ t41.* from t41 join t43 on t41.name=t43.name join t44 on t41.name=t44.name join t45 on t41.name=t45.name and t41.id=1;
explain select t41.* from t41 join t43 on t41.name=t43.name join t44 on t41.name=t44.name join t45 on t41.name=t45.name and t41.id=1;
id	estRows	task	access object	operator info
IndexHashJoin_27	1.95	root		inner join, inner:IndexReader_24, outer key:Column#14, inner key:bindinfo__bind.t45.name, equal cond:eq(Column#14, bindinfo__bind.t45.name)
├─Projection_34(Build)	1.56	root		bindinfo__bind.t41.id, bindinfo__bind.t41.name, cast(bindinfo__bind.t41.name, bigint(20))->Column#14
│ └─IndexHashJoin_40	1.56	root		inner join, inner:IndexReader_37, outer key:Column#11, inner key:bindinfo__bind.t44.name, equal cond:eq(Column#11, bindinfo__bind.t44.name)
│   ├─Projection_47(Build)	1.25	root		bindinfo__bind.t41.id, bindinfo__bind.t41.name, cast(bindinfo__bind.t41.name, bigint(20))->Column#11
│   │ └─IndexHashJoin_53	1.25	root		inner join, inner:IndexReader_50, outer key:Column#9, inner key:bindinfo__bind.t43.name, equal cond:eq(Column#9, bindinfo__bind.t43.name)
│   │   ├─Projection_60(Build)	1.00	root		bindinfo__bind.t41.id, bindinfo__bind.t41.name, cast(bindinfo__bind.t41.name, bigint(20))->Column#9
│   │   │ └─Point_Get_61	1.00	root	table:t41	handle:1
│   │   └─IndexReader_50(Probe)	1.25	root		index:IndexRangeScan_49
│   │     └─IndexRangeScan_49	1.25	cop[tikv]	table:t43, index:idx_name(name)	range: decided by [eq(bindinfo__bind.t43.name, Column#9)], keep order:false, stats:pseudo
│   └─IndexReader_37(Probe)	1.56	root		index:IndexRangeScan_36
│     └─IndexRangeScan_36	1.56	cop[tikv]	table:t44, index:idx_name(name)	range: decided by [eq(bindinfo__bind.t44.name, Column#11)], keep order:false, stats:pseudo
└─IndexReader_24(Probe)	1.95	root		index:IndexRangeScan_23
  └─IndexRangeScan_23	1.95	cop[tikv]	table:t45, index:idx_name(name)	range: decided by [eq(bindinfo__bind.t45.name, Column#14)], keep order:false, stats:pseudo
select t41.* from t41 join t43 on t41.name=t43.name join t44 on t41.name=t44.name join t45 on t41.name=t45.name and t41.id=1;
id	name
1	2
1	2
1	2
1	2
1	2
1	2
1	2
1	2
